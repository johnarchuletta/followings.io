<a type="button" (click)="test()">SoundCloud component</a>
<!--Step 1-->
<div class="wizard" *ngIf="step === 1">
    <div>
        <form id="followings-form">
            <div class="row bb">
                <h2>Who do you follow?</h2>
            </div>
            <div class="row" *ngIf="fs != FollowingsStatus.retrieved">
                <h4>Enter your SoundCloud URL to retrieve the artists you follow.</h4>
            </div>
            <div class="row" *ngIf="fs != FollowingsStatus.retrieved">
                <label for="userId">http://www.soundcloud.com/</label><input [(ngModel)]="username" id="userId" type="text" class="input-sm" placeholder="username">
            </div>
            <div class="row" *ngIf="fs == FollowingsStatus.retrieved">
                <h3 class="ct">{{user.username}}'s Followings</h3>
            </div>
            <div class="row" *ngIf="followings.length > 0">
                <div class="row">
                    <div *ngFor="#following of followings | slice:0:50" style="width: 33%; display: inline-block;">
                        <a href="{{following.permalink_url}}" target="_blank">{{following.username}}</a>
                    </div>
                </div>
                <h4 class="ct">If everything looks correct, move to the next step.</h4>
                <p class="ct" *ngIf="followings.length > 50">(This is only the first 50 artists you follow by the way.)</p>
            </div>
            <div class="row">
                <div class="w50">
                    <button [disabled]="fs == FollowingsStatus.retrieving || fs == FollowingsStatus.retrieved" type="submit" for="followings-form" (click)="getSCFollowings()" class="btn btn-primary">Retrieve Followings</button>
                    <span class="ml15 bg-info" *ngIf="fs == FollowingsStatus.retrieving">Retrieving followings. Please wait.</span>
                    <span class="ml15 bg-success" *ngIf="fs == FollowingsStatus.retrieved">{{followings.length}} followings retrieved.</span>
                    <span class="ml15 bg-danger" *ngIf="fs == FollowingsStatus.noUsername">No username entered.</span>
                    <span class="ml15 bg-danger" *ngIf="fs == FollowingsStatus.error">Error: could not retrieve followings.</span>
                </div>
                <div class="w50 align-right">
                    <button [disabled]="fs != FollowingsStatus.retrieved" type="button" (click)="nextStep()" class="btn btn-success">Next</button>
                </div>
            </div>
        </form>
    </div>
</div>
<!--Step 2-->
<div class="wizard" *ngIf="step === 2">
    <div class="row bb">
        <h2>Are they on HearThis.at?</h2>
    </div>
    <div class="row">
        <h4>Now let's check to see if any of these artists have accounts on HearThis.</h4>
    </div>
    <div class="row">
        <div class="ct">
            <button (click)="findHTUsers()" type="button" class="btn btn-primary">Search HearThis.at</button>
            <button (click)="test()" type="button" class="btn btn-primary">test</button>
        </div>
    </div>
    <div class="row">
        <div style="background: #3a3a3a; color: #fff; padding: 5px 0 5px 0; overflow: auto; border-radius: 4px;">
            <span style="float: left; padding: 0 0 0 5px; width: 200px; border-right: 1px solid #e1e1e1;">Artist Name</span>
            <span style="float: left; width: 300px; padding: 0 0 0 10px; border-right: 1px solid #e1e1e1;">SoundCloud URL</span>
            <span style="float: left; padding: 0 0 0 10px;">Possible HearThis URL</span>
        </div>
        <div *ngFor="#following of followings" style="border-bottom: 1px solid #c8c8c8; padding: 5px 0 5px 0; overflow: auto; clear: left;">
            <span style="float: left; padding: 0 0 0 5px; width: 200px; border-right: 1px solid #e1e1e1;">{{following.username}}</span>
            <span style="float: left; width: 300px; padding: 0 0 0 10px; border-right: 1px solid #e1e1e1;"><a target="_blank" href="http://soundcloud.com/{{following.permalink_url.slice(21)}}">http://soundcloud.com/{{following.permalink_url.slice(22)}}</a></span>
            <span *ngIf="following.ht_permalink != null && following.ht_permalink != ''" style="float: left; padding: 0 0 0 10px;"><a target="_blank" href="http://hearthis.at/{{following.ht_permalink}}">http://hearthis.at/{{following.ht_permalink}}</a></span>
            <span *ngIf="following.ht_permalink === ''" style="float: left; padding: 0 0 0 10px;">Not found</span>
        </div>
    </div>
    <div>
        <div class="w50">
            &nbsp;
        </div>
        <div class="w50 align-right">
            <button type="button" (click)="previousStep();" class="btn btn-default">Back</button>
            <button disabled type="button" (click)="nextStep();" class="btn btn-default">Next</button>
        </div>
    </div>
</div>
<div id="rate-msg" *ngIf="htRateLimitReached === true" style="position: fixed; top: 50%; left: 50%; z-index: 1000; transform: translate(-50%, -50%); border-radius: 10px; background: black; color: white; padding: 50px; transition: transform 1s;">
    <h2>An error occured... Sorry!</h2><br>
    <h3>Unfortunately you have hit HearThis.at's rate limit and cannot check user accounts. This is usually lifted every hour, so come back in a little while and try again.</h3>
    <a href="#" class="btn btn-default" (click)="test()">Close</a>
</div>